<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>Intuici√≥n XAUUSD ‚Äì IA Copiloto</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body{
  margin:0;
  font-family: Arial, sans-serif;
  background:#0f1220;
  color:#eaeaff;
}
header{
  padding:12px;
  text-align:center;
  background:#161a33;
  font-size:20px;
  font-weight:bold;
}
.container{
  display:grid;
  grid-template-columns: 2fr 1fr;
  gap:10px;
  padding:10px;
}
.card{
  background:#161a33;
  border-radius:10px;
  padding:10px;
}
h3{
  margin:6px 0;
  color:#7dd3fc;
}
input, button, textarea{
  width:100%;
  margin-top:6px;
  padding:8px;
  border-radius:6px;
  border:none;
}
button{
  background:#2563eb;
  color:white;
  font-weight:bold;
  cursor:pointer;
}
.signal{
  font-size:22px;
  text-align:center;
  padding:12px;
  border-radius:8px;
  margin-top:8px;
}
.buy{background:#14532d;color:#4ade80;}
.sell{background:#7f1d1d;color:#f87171;}
.wait{background:#1f2933;color:#facc15;}
.chat-box{
  height:220px;
  overflow-y:auto;
  background:#0b0e1a;
  padding:6px;
  border-radius:6px;
}
.chat-msg{
  margin:4px 0;
  font-size:14px;
}
.user{color:#7dd3fc;}
.ia{color:#a7f3d0;}
</style>
</head>

<body>

<header>üß† Intuici√≥n XAUUSD ‚Äì IA Copiloto</header>

<div class="container">

<!-- GR√ÅFICA -->
<div class="card">
<h3>üìà Gr√°fica en vivo</h3>
<div style="height:420px;">
<script src="https://s3.tradingview.com/tv.js"></script>
<script>
new TradingView.widget({
  "symbol": "OANDA:XAUUSD",
  "interval": "15",
  "timezone": "Europe/Madrid",
  "theme": "dark",
  "style": "1",
  "locale": "es",
  "container_id": "tv_chart",
  "hide_side_toolbar": false,
  "allow_symbol_change": false,
  "save_image": false,
  "studies": ["RSI@tv-basicstudies","MACD@tv-basicstudies"]
});
</script>
<div id="tv_chart" style="height:100%;"></div>
</div>
</div>

<!-- PANEL IA -->
<div class="card">

<h3>ü§ñ Se√±al IA</h3>
<div id="signal" class="signal wait">ESPERANDO DATOS...</div>

<h3>‚öôÔ∏è Gesti√≥n</h3>
<input id="lote" placeholder="Lote (ej: 0.10)">
<input id="pips" placeholder="Pips objetivo">
<input id="apal" placeholder="Apalancamiento (ej: 100)">
<button onclick="calcular()">Calcular Ganancia</button>
<div id="resultado"></div>

<h3>üí¨ Chat IA</h3>
<div class="chat-box" id="chat"></div>
<textarea id="msg" placeholder="Habla con la IA..."></textarea>
<button onclick="enviar()">Enviar</button>

</div>
</div>

<script>
// ‚ö†Ô∏è d3cd94ff08974ed893ad7f77c1cd3b87
const API_KEY = "d3cd94ff08974ed893ad7f77c1cd3b87 ";
const SYMBOL = "XAUUSD";

// CHAT
function addMsg(text, cls){
  const chat = document.getElementById("chat");
  chat.innerHTML += `<div class="chat-msg ${cls}">${text}</div>`;
  chat.scrollTop = chat.scrollHeight;
}

// ENV√çO CHAT
function enviar(){
  const m = msg.value;
  if(!m) return;
  addMsg("üßë‚Äçüíª " + m, "user");
  msg.value="";
  setTimeout(()=>{
    addMsg("ü§ñ IA: Mant√©n disciplina. El mercado se est√° definiendo.", "ia");
  },600);
}

// C√ÅLCULO
function calcular(){
  const lote = parseFloat(lote.value || 0);
  const pips = parseFloat(pips.value || 0);
  const res = lote * pips * 10;
  resultado.innerHTML = "üí∞ Posible ganancia: $" + res.toFixed(2);
}

// DATOS REALES
async function datos(){
  try{
    const r = await fetch(`https://api.twelvedata.com/quote?symbol=${SYMBOL}&apikey=${API_KEY}`);
    const d = await r.json();
    analizar(d.price);
  }catch(e){
    console.log(e);
  }
}

// IA SIMPLE
function analizar(price){
  let s = document.getElementById("signal");
  if(price % 2 > 1){
    s.className="signal buy";
    s.innerHTML="üü¢ COMPRA";
  }else if(price % 2 < 0.5){
    s.className="signal sell";
    s.innerHTML="üî¥ VENTA";
  }else{
    s.className="signal wait";
    s.innerHTML="üü° ESPERAR";
  }
}

// LOOP
setInterval(datos, 15000);
</script>

</body>
</html>
