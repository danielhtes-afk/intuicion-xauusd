<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>Intuici√≥n XAUUSD</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script src="https://s3.tradingview.com/tv.js"></script>

<style>
body{
  margin:0;
  background:#0f1220;
  color:#ffffff;
  font-family:Arial, sans-serif;
}

/* ===== STREAM ===== */
.stream{
  display:flex;
  flex-direction:column;
  gap:16px;
  padding:14px;
}

/* ===== GR√ÅFICA ===== */
#chart{
  width:100%;
  height:65vh;
  border-radius:14px;
  overflow:hidden;
}

/* ===== CUADROS ===== */
.panel{
  background:#161a2e;
  border-radius:14px;
  padding:16px;
  box-shadow:0 0 12px rgba(0,0,0,.45);
}

.panel h3{
  margin:0 0 12px 0;
  text-align:center;
  color:#00e0ff;
}

/* ===== BOTONES ===== */
button{
  width:100%;
  padding:12px;
  margin:6px 0;
  border:none;
  border-radius:10px;
  font-size:15px;
  font-weight:bold;
  cursor:pointer;
}

.buy{ background:#00c853; color:#000; }
.sell{ background:#ff5252; color:#000; }
.close{ background:#ffd600; color:#000; }

.pos{ background:#00e676; color:#000; }
.neg{ background:#ff1744; color:#000; }

/* ===== INFO ===== */
.info{
  margin-top:6px;
  font-size:14px;
}

/* ===== SEM√ÅFORO ===== */
.semaforo{
  display:flex;
  justify-content:center;
  gap:14px;
  margin:14px 0;
}

.luz{
  width:28px;
  height:28px;
  border-radius:50%;
  background:#333;
}

.verde.activo{ background:#00e676; box-shadow:0 0 14px #00e676; }
.amarillo.activo{ background:#ffd600; box-shadow:0 0 14px #ffd600; }
.rojo.activo{ background:#ff5252; box-shadow:0 0 14px #ff5252; }

/* ===== INTUICI√ìN IA (m√°s grande) ===== */
.ia{
  font-size:18px;
}

.ia b{
  font-size:20px;
  color:#00e0ff;
}

/* ===== HISTORIAL ===== */
.historial{
  font-size:13px;
  margin-top:10px;
  max-height:120px;
  overflow:auto;
  opacity:.9;
}
</style>
</head>

<body>

<div class="stream">

  <!-- GR√ÅFICA -->
  <div id="chart"></div>

  <!-- CONTROL + SEM√ÅFORO -->
  <div class="panel">
    <h3>üß† Control de Operaci√≥n</h3>

    <button class="buy" onclick="entrar('COMPRA')">Entr√© en COMPRA</button>
    <button class="sell" onclick="entrar('VENTA')">Entr√© en VENTA</button>
    <button class="close" onclick="cerrar()">Cerr√© Operaci√≥n</button>

    <div class="semaforo">
      <div class="luz verde" id="luzVerde"></div>
      <div class="luz amarillo" id="luzAmarilla"></div>
      <div class="luz rojo" id="luzRoja"></div>
    </div>

    <button class="pos" onclick="resultado(true)">Resultado POSITIVO</button>
    <button class="neg" onclick="resultado(false)">Resultado NEGATIVO</button>

    <div class="info" id="estado">Estado: esperando entrada‚Ä¶</div>
    <div class="info" id="resultadoTxt"></div>

    <div class="historial" id="historial"></div>
  </div>

  <!-- INTUICI√ìN IA -->
  <div class="panel ia">
    <h3>üìä Intuici√≥n IA</h3>
    <div class="info">Direcci√≥n: <b id="dir">‚Äî</b></div>
    <div class="info">Fuerza: <b id="fuerza">‚Äî</b></div>
    <div class="info">Tiempo estimado: <b id="tiempo">‚Äî</b></div>
    <div class="info">Sugerencia: <b id="sugerencia">Esperando mercado</b></div>
  </div>

</div>

<script>
/* ===== TRADINGVIEW ===== */
new TradingView.widget({
  container_id: "chart",
  symbol: "OANDA:XAUUSD",
  interval: "5",
  theme: "dark",
  locale: "es",
  autosize: true
});

/* ===== ESTADO ===== */
let operacion = null;
let semaforoActual = null;
let dataIA = [];

/* ===== SEM√ÅFORO ===== */
function resetSemaforo(){
  ["luzVerde","luzAmarilla","luzRoja"].forEach(id=>{
    document.getElementById(id).classList.remove("activo");
  });
}

function setSemaforo(color){
  resetSemaforo();
  semaforoActual = color;
  document.getElementById("luz"+color).classList.add("activo");
}

/* ===== CONTROL ===== */
function entrar(tipo){
  operacion = tipo;
  document.getElementById("estado").innerHTML =
    "Operaci√≥n abierta en <b>"+tipo+"</b>";
  document.getElementById("resultadoTxt").innerHTML = "";
  setSemaforo("Verde");

  setTimeout(()=>setSemaforo("Amarilla"),20000);
  setTimeout(()=>setSemaforo("Roja"),35000);
}

function cerrar(){
  if(!operacion) return alert("No hay operaci√≥n abierta");
  document.getElementById("estado").innerHTML =
    "Operaci√≥n cerrada, indica resultado";
}

/* ===== RESULTADO / APRENDIZAJE ===== */
function resultado(positivo){
  if(!operacion) return;

  const registro = {
    tipo: operacion,
    semaforo: semaforoActual,
    resultado: positivo ? "POSITIVO" : "NEGATIVO"
  };

  dataIA.push(registro);

  document.getElementById("resultadoTxt").innerHTML =
    "Resultado: <b>"+registro.resultado+"</b>";

  document.getElementById("historial").innerHTML +=
    "‚Ä¢ "+registro.tipo+" | "+registro.semaforo+" | "+registro.resultado+"<br>";

  operacion = null;
  resetSemaforo();
}

/* ===== IA VISUAL ===== */
setInterval(()=>{
  const alcista = Math.random()>0.5;
  document.getElementById("dir").innerText = alcista?"ALCISTA üìà":"BAJISTA üìâ";
  document.getElementById("fuerza").innerText =
    Math.floor(Math.random()*30+60)+"%";
  document.getElementById("tiempo").innerText =
    Math.floor(Math.random()*10+5)+" min";
  document.getElementById("sugerencia").innerText =
    alcista?"Mantener COMPRA":"Mantener VENTA";
},5000);
</script>

</body>
</html>
